package algorithm.leetCode.stack;

import java.util.HashMap;
import java.util.Stack;

//ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ '('ï¼Œ')'ï¼Œ'{'ï¼Œ'}'ï¼Œ'['ï¼Œ']' çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚
//
// æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š
//
//
// å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚
// å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚
//
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šs = "()"
//è¾“å‡ºï¼štrue
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šs = "()[]{}"
//è¾“å‡ºï¼štrue
//
//
// ç¤ºä¾‹ 3ï¼š
//
//
//è¾“å…¥ï¼šs = "(]"
//è¾“å‡ºï¼šfalse
//
//
// ç¤ºä¾‹ 4ï¼š
//
//
//è¾“å…¥ï¼šs = "([)]"
//è¾“å‡ºï¼šfalse
//
//
// ç¤ºä¾‹ 5ï¼š
//
//
//è¾“å…¥ï¼šs = "{[]}"
//è¾“å‡ºï¼štrue
//
//
//
// æç¤ºï¼š
//
//
// 1 <= s.length <= 104
// s ä»…ç”±æ‹¬å· '()[]{}' ç»„æˆ
//
// Related Topics æ ˆ å­—ç¬¦ä¸²
// ğŸ‘ 2403 ğŸ‘ 0
public class _20_æœ‰æ•ˆçš„æ‹¬å· {

    /**
     * æ£€æŸ¥è¾“å…¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯æœ‰æ•ˆçš„æ‹¬å·åºåˆ—ã€‚
     * ä½¿ç”¨å¾ªç¯å’Œå­—ç¬¦ä¸²æ›¿æ¢æ¥æ¶ˆé™¤åŒ¹é…çš„æ‹¬å·å¯¹ã€‚
     * 
     * @param s è¾“å…¥çš„æ‹¬å·åºåˆ—
     * @return å¦‚æœè¾“å…¥çš„æ‹¬å·åºåˆ—æœ‰æ•ˆï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› false
     */
    public boolean isValid1(String s) {
        // å¾ªç¯æŒç»­æ£€æŸ¥å’Œæ¶ˆé™¤åŒ¹é…çš„æ‹¬å·å¯¹ï¼Œç›´åˆ°å­—ç¬¦ä¸²ä¸­ä¸å†åŒ…å«ä»»ä½•æ‹¬å·å¯¹
        while (s.contains("{}") || s.contains("()") || s.contains("[]")) {
            // ä½¿ç”¨å­—ç¬¦ä¸²æ›¿æ¢æ–¹æ³•å°†åŒ¹é…çš„æ‹¬å·å¯¹æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œç›¸å½“äºæ¶ˆé™¤äº†ä¸€ä¸ªæ‹¬å·å¯¹
            s = s.replace("{}", "");
            s = s.replace("[]", "");
            s = s.replace("()", "");
        }
        // å¾ªç¯ç»“æŸåï¼Œå¦‚æœå­—ç¬¦ä¸²å˜ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å› trueï¼Œè¡¨ç¤ºè¾“å…¥çš„æ‹¬å·åºåˆ—æ˜¯æœ‰æ•ˆçš„
        // å¦åˆ™è¿”å› false
        return s.isEmpty();
    }

    /**
     * [{()}]
     * 1.åˆ¤æ–­é‡è§çš„æ˜¯å·¦å­—ç¬¦ï¼Œå°†å·¦å­—ç¬¦å…¥æ ˆ
     * 2.é‡è§å³å­—ç¬¦
     * a.å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜æ‹¬å·æ— æ•ˆ
     * b.å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œå°†æ ˆé¡¶å­—ç¬¦å‡ºæ ˆï¼Œä¸å³å­—ç¬¦åŒ¹é…
     * å¦‚æœå·¦å³å­—ç¬¦ä¸åŒ¹é…ï¼Œè¯´æ˜æ‹¬å·æ— æ•ˆ
     * å¦‚æœåŒ¹é…ï¼Œç»§ç»­æ‰«æä¸‹ä¸€ä¸ªå­—ç¬¦
     * 3.æ‰€æœ‰çš„å­—ç¬¦æ‰«æå®Œæ¯•å
     * å¦‚æœæ ˆä¸ºç©ºï¼Œåˆ™æ‹¬å·æœ‰æ•ˆ
     * å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œè¯´æ˜æ‹¬å·æ— æ•ˆ
     * 
     * @param s è¾“å…¥çš„æ‹¬å·åºåˆ—
     * @return å¦‚æœè¾“å…¥çš„æ‹¬å·åºåˆ—æœ‰æ•ˆï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› false
     */
    public boolean isValid2(String s) {
        // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ç±»å‹çš„æ ˆï¼Œç”¨äºå­˜å‚¨å·¦æ‹¬å·
        Stack<Character> stack = new Stack<Character>();

        // éå†è¾“å…¥å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦
        for (int i = 0; i < s.length(); i++) {
            char charAt = s.charAt(i);
            if (charAt == '(' || charAt == '{' || charAt == '[') {
                // å¦‚æœå­—ç¬¦æ˜¯å·¦æ‹¬å·ï¼Œåˆ™å°†å…¶å‹å…¥æ ˆä¸­
                stack.push(charAt);
            } else {
                // å¦‚æœå­—ç¬¦æ˜¯å³æ‹¬å·
                if (stack.isEmpty()) {
                    // å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜å³æ‹¬å·æ²¡æœ‰åŒ¹é…çš„å·¦æ‹¬å·ï¼Œè¿”å› false
                    return false;
                }

                // ä»æ ˆé¡¶å¼¹å‡ºä¸€ä¸ªå·¦æ‹¬å·
                char left = stack.pop();
                // æ£€æŸ¥å·¦å³æ‹¬å·æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œè¿”å› false
                if (left == '(' && charAt != ')') {
                    return false;
                }
                if (left == '{' && charAt != '}') {
                    return false;
                }
                if (left == '[' && charAt != ']') {
                    return false;
                }
            }
        }

        // å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜æ‰€æœ‰å·¦æ‹¬å·éƒ½æœ‰åŒ¹é…çš„å³æ‹¬å·ï¼Œè¿”å› true
        // å¦åˆ™è¿”å› false
        return stack.isEmpty();
    }

    /**
     * æ£€æŸ¥è¾“å…¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯æœ‰æ•ˆçš„æ‹¬å·åºåˆ—ã€‚
     * ä½¿ç”¨å“ˆå¸Œæ˜ å°„å’Œæ ˆæ¥å®ç°æ‹¬å·çš„åŒ¹é…æ£€æŸ¥ã€‚
     * 
     * @param s è¾“å…¥çš„æ‹¬å·åºåˆ—
     * @return å¦‚æœè¾“å…¥çš„æ‹¬å·åºåˆ—æœ‰æ•ˆï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› false
     */
    public boolean isValid3(String s) {
        // åˆ›å»ºä¸€ä¸ªå“ˆå¸Œæ˜ å°„ï¼Œå­˜å‚¨å·¦æ‹¬å·å’Œå³æ‹¬å·çš„æ˜ å°„å…³ç³»
        HashMap<Character, Character> map = new HashMap<>();
        map.put('{', '}');
        map.put('(', ')');
        map.put('[', ']');

        // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ç±»å‹çš„æ ˆï¼Œç”¨äºå­˜å‚¨é‡åˆ°çš„å·¦æ‹¬å·
        Stack<Character> stack = new Stack<>();

        // éå†è¾“å…¥å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦
        for (int i = 0; i < s.length(); i++) {
            char c = s.charAt(i);
            if (map.containsKey(c)) {
                // å¦‚æœå½“å‰å­—ç¬¦æ˜¯å·¦æ‹¬å·ï¼Œåˆ™å°†å…¶å‹å…¥æ ˆä¸­
                stack.push(c);
            } else {
                // å¦‚æœå½“å‰å­—ç¬¦æ˜¯å³æ‹¬å·
                if (stack.isEmpty()) {
                    // å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜å³æ‹¬å·æ²¡æœ‰åŒ¹é…çš„å·¦æ‹¬å·ï¼Œè¿”å› false
                    return false;
                }
                // ä»æ ˆé¡¶å¼¹å‡ºä¸€ä¸ªå·¦æ‹¬å·
                char left = stack.pop();
                // æ£€æŸ¥å½“å‰å³æ‹¬å·æ˜¯å¦ä¸å¼¹å‡ºçš„å·¦æ‹¬å·åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œè¿”å› false
                if (c != map.get(left)) {
                    return false;
                }
            }
        }

        // å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜æ‰€æœ‰å·¦æ‹¬å·éƒ½æœ‰åŒ¹é…çš„å³æ‹¬å·ï¼Œè¿”å› true
        // å¦åˆ™è¿”å› false
        return stack.isEmpty();
    }

}
